"use strict";(self.webpackChunkots=self.webpackChunkots||[]).push([[199],{7027:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(1413),i=r(9439),l=r(6195),o=r(2791),d=r(763),a=r(3329);function s(e){var n=e.columns,r=e.numberOfHeight,s=void 0===r?123:r,c=e.data,u=void 0===c?[]:c,f=e.isRenderCheckbox,v=void 0===f||f,m=(0,o.useState)(0),h=(0,i.Z)(m,2),x=(h[0],h[1]),b=(0,o.useRef)(null);(0,o.useEffect)((function(){var e;if(null!==b&&void 0!==b&&null!==(e=b.current)&&void 0!==e&&e.offsetHeight){var n,r=(null===b||void 0===b||null===(n=b.current)||void 0===n?void 0:n.offsetHeight)||0;x(r-(s||100))}}),[s]),(0,o.useEffect)((function(){var e=(0,d.debounce)((function(){var e,n=(null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.offsetHeight)||0;x(n-(s||100))}),1e3);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[s]);return(0,a.jsx)("div",{ref:b,className:"mt-4 custom-table",children:(0,a.jsx)(l.Z,{scroll:{y:380},rowKey:"id",dataSource:u,columns:n,rowSelection:v?(0,t.Z)({type:"checkbox"},{onChange:function(e,n){},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}}):void 0},"id")})}},153:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(2791),i=r(6435),l=r(5413),o=r(3422),d=r(8323),a=r(3329),s=i.Z.Option;function c(e){var n,r,c=e.order,u=e.status,f=e.isShowChange,v=void 0!==f&&f,m=(0,o.T)(),h=null!==(n=null===l.Q||void 0===l.Q?void 0:l.Q[u])&&void 0!==n?n:null===l.Q||void 0===l.Q?void 0:l.Q[1],x=(0,t.useCallback)((function(e){m((0,d.y)({oldStatus:null===c||void 0===c?void 0:c.status_customer,newStatus:e,order_id:c.id}))}),[m,c]);return(0,a.jsx)("div",{className:" rounded text-center text-xs px-2 font-semibold  ".concat(v?"":"py-2"),style:{background:h.backgroundColor,color:h.color,width:120,height:30},children:v?(0,a.jsx)(i.Z,{style:{width:"100%",height:30,color:h.color,textAlign:"center"},value:h.label,onChange:x,children:null===(r=Object.keys(l.Q))||void 0===r?void 0:r.map((function(e){var n,r=l.Q[e];return(0,a.jsx)(s,{value:e,style:{background:r.backgroundColor},children:null===(n=l.Q[e])||void 0===n?void 0:n.label},e)}))}):h.label})}},3422:function(e,n,r){r.d(n,{C:function(){return l},T:function(){return i}});var t=r(9434),i=function(){return(0,t.I0)()},l=t.v9},5199:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var t=r(1413),i=r(9439),l=r(2791),o=r(7027),d=r(153),a=r(1730),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},c=r(9726),u=function(e,n){return l.createElement(c.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:n,icon:s}))};u.displayName="FilterOutlined";var f=l.forwardRef(u),v=r(8686),m=r(9603),h=r(4219),x=r(2426),b=r.n(x),p=r(3422),g=r(9932),j=r(2014),_=r(3231),Z=r(5413),y=r(3329);function C(e){var n,r=e.filterOptions,i=e.setFilterOptions,o=(0,l.useCallback)((function(e){i((0,t.Z)((0,t.Z)({},r),{},{update_time:e}))}),[r]),a=(0,l.useCallback)((function(e){i((0,t.Z)((0,t.Z)({},r),{},{order_by_timing:e}))}),[r]);return(0,y.jsxs)("div",{className:"pl-4",children:[(0,y.jsx)("div",{style:{color:"#fff",background:"#cdd8e7"},className:" text-md font-semibold rounded-t-lg py-2 px-4 ",children:"Filter"}),(0,y.jsxs)("div",{className:"rounded-lg card-box-shadow  p-4",style:{background:"#fff",width:"100%",height:"auto"},children:[(0,y.jsx)("span",{className:"font-bold",children:"Status"}),(0,y.jsx)("div",{className:"mt-4 flex flex-wrap mb-4",children:null===(n=Object.keys(Z.Q))||void 0===n?void 0:n.map((function(e,n){var l=Z.Q[e];return(0,y.jsx)("div",{className:"mb-2 mr-4",children:(0,y.jsx)(j.Z,{value:e,onChange:function(e){var n=e.target.value,l=r.status;l.some((function(e){return e===n}))?l=l.filter((function(e){return e!==n})):l.push(n),i((0,t.Z)((0,t.Z)({},r),{},{status:l}))},children:(0,y.jsx)(d.Z,{status:e})},l.label)})}))}),(0,y.jsx)("span",{className:"font-bold ",children:"Rider name : "}),(0,y.jsx)("div",{className:"mt-2 flex flex-col mb-4",children:(0,y.jsx)(h.Z,{className:"mr-4 rounded",placeholder:"input rider name...",onChange:function(e){i((0,t.Z)((0,t.Z)({},r),{},{name_rider:e.target.value}))}})}),(0,y.jsx)("span",{className:"font-bold ",children:"Merchant name : "}),(0,y.jsx)("div",{className:"mt-2 flex flex-col mb-4",children:(0,y.jsx)(h.Z,{onChange:function(e){i((0,t.Z)((0,t.Z)({},r),{},{merchant_name:e.target.value}))},className:"mr-4 rounded",placeholder:"input merchant name..."})}),(0,y.jsx)("span",{className:"font-bold ",children:"Update time : "}),(0,y.jsx)("div",{className:"mt-4 flex flex-col mb-4",children:(0,y.jsxs)(_.ZP.Group,{className:"mb-2 ",value:r.update_time,onChange:function(e){return o(e.target.value)},children:[(0,y.jsx)(_.ZP,{value:null,children:"None"}),(0,y.jsx)(_.ZP,{value:5,children:"Last 5"}),(0,y.jsx)(_.ZP,{value:10,children:"Last 10"}),(0,y.jsx)(_.ZP,{value:15,children:"Last 15"})]})}),(0,y.jsx)("span",{className:"font-bold ",children:" Order by timing : "}),(0,y.jsx)("div",{className:"mt-4 flex flex-col mb-4",children:(0,y.jsxs)(_.ZP.Group,{className:"mb-2 ",value:r.order_by_timing,onChange:function(e){return a(e.target.value)},children:[(0,y.jsx)(_.ZP,{value:null,children:"None"}),(0,y.jsx)(_.ZP,{value:30,children:"Warning"}),(0,y.jsx)(_.ZP,{value:40,children:"Late"})]})})]})]})}var N=r(1087);function k(){var e=(0,l.useState)(!1),n=(0,i.Z)(e,2),r=n[0],s=n[1],c=(0,p.C)(g.bO),u=(0,p.C)(g.Iq),x=(0,l.useState)({status:[],name_order:null,name_rider:null,merchant_name:null,update_time:null,order_by_timing:null}),j=(0,i.Z)(x,2),_=j[0],Z=j[1],k=(0,l.useState)(c),w=(0,i.Z)(k,2),O=w[0],S=w[1];(0,l.useEffect)((function(){S(c)}),[c]);var D=(0,l.useCallback)((function(e,n){return null===_||void 0===_||!_[n]||!(null===e||void 0===e||!e[n].match(null===_||void 0===_?void 0:_[n]))}),[_]);(0,l.useEffect)((function(){var e=[],n=[];if(_.order_by_timing){var r=u.reduce((function(e,n){return(e[n.order_id]=e[n.order_id]||[]).push(n),e}),{}),i=[],l=[];Object.keys(r).map((function(e){var n=r[e];null===n||void 0===n||n.map((function(e,r){var o=e,d=n[r+1];if(d){var a=b().duration(b()(d.update_time).diff(b()(o.update_time))).asMinutes()%60;a>=30&&a<40?i.push((0,t.Z)((0,t.Z)({},o),{},{time:a})):a>=40&&l.push((0,t.Z)((0,t.Z)({},o),{},{time:a}))}}))})),30==_.order_by_timing&&i.length?e=null===c||void 0===c?void 0:c.map((function(e){var n=null===i||void 0===i?void 0:i.find((function(n){return(null===e||void 0===e?void 0:e.id)==(null===n||void 0===n?void 0:n.order_id)}));return n?(0,t.Z)((0,t.Z)({},e),{},{time:null===n||void 0===n?void 0:n.time}):void 0})).filter(Boolean):40==_.order_by_timing&&l.length&&(n=null===c||void 0===c?void 0:c.map((function(e){var n=null===l||void 0===l?void 0:l.find((function(n){return(null===e||void 0===e?void 0:e.id)==(null===n||void 0===n?void 0:n.order_id)}));return n?(0,t.Z)((0,t.Z)({},e),{},{time:null===n||void 0===n?void 0:n.time}):void 0})).filter(Boolean))}var o=null===c||void 0===c?void 0:c.filter((function(e){var n,r;return 0===(null===(n=_.status)||void 0===n?void 0:n.length)||!(null===(r=_.status)||void 0===r||!r.some((function(n){return e.status_customer==n})))})).filter((function(e){return D(e,"name_order")})).filter((function(e){return D(e,"name_rider")})).filter((function(e){return D(e,"merchant_name")})).filter((function(e){if(null!==_&&void 0!==_&&_.update_time){var n=b()().diff(b()(e.update_time),"minutes");return n>=0&&n<=_.update_time}return!0})).filter((function(r){var t,i;return null===_||void 0===_||!_.order_by_timing||(40==(null===_||void 0===_?void 0:_.order_by_timing)?!(null===(t=n)||void 0===t||!t.find((function(e){return e.id===r.id}))):!(null===(i=e)||void 0===i||!i.find((function(e){return e.id===r.id}))))}));S(o)}),[_]);var Q=[{align:"left",title:"Name order",isResize:!0,dataIndex:"name_order",width:100,isOnClickRow:!0,sorter:function(e,n){var r;return null===e||void 0===e||null===(r=e.name_order)||void 0===r?void 0:r.localeCompare(null===n||void 0===n?void 0:n.name_order)},sortDirections:["descend","ascend"],render:function(e,n){return(0,y.jsx)(N.rU,{to:"/orders/".concat(n.id),children:(0,y.jsx)("strong",{style:{color:"#000"},children:e})})}},{isResize:!0,align:"center",title:"Name rider",dataIndex:"name_rider",width:100,isOnClickRow:!0,sorter:function(e,n){var r;return null===e||void 0===e||null===(r=e.name_rider)||void 0===r?void 0:r.localeCompare(null===n||void 0===n?void 0:n.name_rider)},sortDirections:["descend","ascend"],render:function(e){return(0,y.jsx)("strong",{style:{color:"#000"},children:e})}},{align:"center",title:"Merchant",width:200,dataIndex:"merchant_name",type:"selection",renderInSearch:!0,span:7,sorter:function(e,n){var r;return null===e||void 0===e||null===(r=e.merchant_name)||void 0===r?void 0:r.localeCompare(null===n||void 0===n?void 0:n.merchant_name)},sortDirections:["descend","ascend"],render:function(e,n){return(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)("strong",{style:{color:"#000"},children:e}),(0,y.jsx)("span",{style:{color:"#d0d3e2"},children:null===n||void 0===n?void 0:n.merchant_address})]})}},{align:"center",title:"Total price",width:100,dataIndex:"total_price",renderInSearch:!0,sorter:function(e,n){var r;return null===e||void 0===e||null===(r=e.total_price)||void 0===r?void 0:r.localeCompare(null===n||void 0===n?void 0:n.total_price)},sortDirections:["descend","ascend"],render:function(e){return(0,y.jsxs)("span",{children:[(0,y.jsx)("strong",{children:"$"})," ",Number(e.toFixed(1)).toLocaleString()]})}},{align:"center",title:"Update time",dataIndex:"update_time",width:100,type:"switch",renderInSearch:!0,sorter:function(e,n){return b()(e.update_time).unix()-b()(n.update_time).unix()},sortDirections:["descend","ascend"],render:function(e){return(0,y.jsx)("span",{children:b()(e).format("DD/MM/yyyy HH:MM:ss")})}},{align:"center",title:"Status",isResize:!0,dataIndex:"status_customer",width:100,isOnClickRow:!0,render:function(e){return(0,y.jsx)(d.Z,{status:e})},sorter:function(e,n){return(null===e||void 0===e?void 0:e.status_customer)-(null===n||void 0===n?void 0:n.status_customer)},sortDirections:["descend","ascend"]}];return(0,y.jsx)("div",{className:"ml-12 mr-6 my-12",children:(0,y.jsxs)(v.Z,{children:[(0,y.jsxs)(m.Z,{span:r?18:24,children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsx)("span",{className:"text-xl font-semibold",children:"Orders"}),(0,y.jsxs)("div",{className:"flex",children:[(0,y.jsx)(h.Z,{className:"mr-4 rounded",placeholder:"Search order",prefix:(0,y.jsx)(a.Z,{}),onChange:function(e){Z((0,t.Z)((0,t.Z)({},_),{},{name_order:e.target.value}))}}),(0,y.jsxs)("div",{onClick:function(){return s(!r)},className:"rounded px-3 py-2 card-box-shadow cursor-pointer w-40 text-center font-semibold",style:{background:"#cdd8e8",color:"#63718d"},children:[(0,y.jsx)(f,{className:"mr-2"})," Filter"]})]})]}),(0,y.jsx)("div",{style:{background:"#fff"},children:(0,y.jsx)(o.Z,{data:null!==O&&void 0!==O?O:[],columns:Q})})]}),(0,y.jsx)(m.Z,{span:r?6:0,children:(0,y.jsx)(C,{filterOptions:_,setFilterOptions:Z})})]})})}},5413:function(e,n,r){r.d(n,{Q:function(){return t}});var t={1:{label:"Created",color:"#fff",backgroundColor:"#ffbf3988"},2:{label:"Accepted",color:"#fff",backgroundColor:"#efdbda88"},3:{label:"Driver Assigned",color:"#fff",backgroundColor:"#debace88"},4:{label:"Delivering",color:"#bbcdf7",backgroundColor:"#ccfcf688"},5:{label:"Done",color:"#fff",backgroundColor:"#5ccb8b88"},6:{label:"Canceled",color:"#fff",backgroundColor:"#f18f7c88"}}}}]);
//# sourceMappingURL=199.e7a2b8d6.chunk.js.map